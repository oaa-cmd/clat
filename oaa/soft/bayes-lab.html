<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>kmp+</title>
    <style>
        :root {
            --bg-primary: #ffffff;
            --bg-secondary: #f5f5f5;
            --color-primary: #325980;
            --color-interactive: #3498db;
            --color-divider: #f1f1f1;
            --text-primary: #333333;
            --text-secondary: #666666;
            --shadow: rgba(0, 0, 0, 0.1);
        }

        [data-theme="dark"] {
            --bg-primary: #1a1a1a;
            --bg-secondary: #2d2d2d;
            --color-primary: #5a8fc8;
            --color-interactive: #64b5f6;
            --color-divider: #404040;
            --text-primary: #e0e0e0;
            --text-secondary: #b0b0b0;
            --shadow: rgba(0, 0, 0, 0.3);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: var(--bg-secondary);
            color: var(--text-primary);
            line-height: 1.6;
            transition: all 0.3s ease;
        }

        header {
            background-color: var(--color-primary);
            color: white;
            padding: 1rem 0;
            box-shadow: 0 2px 5px var(--shadow);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        h1 {
            font-size: 1.5rem;
            font-weight: 600;
        }

        .theme-toggle {
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .theme-toggle:hover {
            transform: scale(1.1);
        }

        .container {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 1rem;
        }

        .card {
            background-color: var(--bg-primary);
            border-radius: 8px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 2px 10px var(--shadow);
        }

        .info-section {
            background-color: var(--bg-secondary);
            padding: 1.5rem;
            border-radius: 8px;
            margin-bottom: 2rem;
        }

        .info-section h3 {
            color: var(--color-primary);
            margin-bottom: 1rem;
        }

        .text-input-section {
            margin-bottom: 2rem;
        }

        .text-input-section label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: var(--text-secondary);
        }

        #textInput {
            width: 100%;
            min-height: 150px;
            padding: 1rem;
            border: 2px solid var(--color-divider);
            border-radius: 8px;
            font-size: 1rem;
            resize: vertical;
            background-color: var(--bg-primary);
            color: var(--text-primary);
            transition: border-color 0.3s ease;
        }

        #textInput:focus {
            outline: none;
            border-color: var(--color-interactive);
        }

        .name-input {
            margin: 1rem 0;
        }

        .name-input input {
            padding: 0.5rem 1rem;
            border: 2px solid var(--color-divider);
            border-radius: 4px;
            font-size: 1rem;
            background-color: var(--bg-primary);
            color: var(--text-primary);
        }

        .analyze-btn {
            background-color: var(--color-interactive);
            color: white;
            border: none;
            padding: 0.75rem 2rem;
            font-size: 1rem;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 1rem;
        }

        .analyze-btn:hover {
            background-color: #2980b9;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px var(--shadow);
        }

        .results-section {
            display: none;
        }

        .highlighted-text {
            line-height: 2;
            margin-bottom: 2rem;
            padding: 1rem;
            background-color: var(--bg-secondary);
            border-radius: 8px;
        }

        .keyword-h1 {
            background-color: #e3f2fd;
            color: #1976d2;
            padding: 2px 6px;
            border-radius: 4px;
            font-weight: 500;
        }

        .keyword-h2 {
            background-color: #fce4ec;
            color: #c2185b;
            padding: 2px 6px;
            border-radius: 4px;
            font-weight: 500;
        }

        [data-theme="dark"] .keyword-h1 {
            background-color: #1e3a5f;
            color: #64b5f6;
        }

        [data-theme="dark"] .keyword-h2 {
            background-color: #4a1c3d;
            color: #f48fb1;
        }

        .formula-section {
            background-color: var(--bg-secondary);
            padding: 1.5rem;
            border-radius: 8px;
            margin: 2rem 0;
        }

        .formula {
            font-family: 'Courier New', monospace;
            font-size: 1.1rem;
            text-align: center;
            margin: 1rem 0;
            padding: 1rem;
            background-color: var(--bg-primary);
            border-radius: 8px;
            border-left: 4px solid var(--color-interactive);
        }

        .explanation-section {
            margin: 2rem 0;
            padding: 1.5rem;
            background-color: var(--bg-secondary);
            border-radius: 8px;
        }

        .explanation-step {
            margin-bottom: 1.5rem;
            padding: 1rem;
            background-color: var(--bg-primary);
            border-radius: 8px;
            border-left: 4px solid var(--color-primary);
        }

        .step-number {
            display: inline-block;
            width: 30px;
            height: 30px;
            background-color: var(--color-primary);
            color: white;
            border-radius: 50%;
            text-align: center;
            line-height: 30px;
            margin-right: 0.5rem;
            font-weight: bold;
        }

        .probability-cards {
            display: flex;
            gap: 1rem;
            margin: 1.5rem 0;
            flex-wrap: wrap;
        }

        .probability-card {
            flex: 1;
            min-width: 250px;
            padding: 1rem;
            background-color: var(--bg-primary);
            border-radius: 8px;
            box-shadow: 0 2px 5px var(--shadow);
            text-align: center;
        }

        .probability-card h4 {
            color: var(--color-primary);
            margin-bottom: 0.5rem;
        }

        .probability-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--color-interactive);
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 1.2rem;
            }

            .card {
                padding: 1rem;
            }

            .formula {
                font-size: 0.9rem;
            }

            .probability-cards {
                flex-direction: column;
            }
        }

        
		
		  footer {
      text-align: center;
      padding: 20px 0;
      margin-top: 40px;
      font-size: 0.9rem;
      border-top: 0px solid #ddd;
    }
    </style>
</head>
<body>
    <header>
        <div class="header-content">
            <h1>Формула Байеса</h1>
            <button class="theme-toggle" onclick="toggleTheme()">☀️</button>
        </div>
    </header>

    <div class="container">
        <div class="card">
            <div class="info-section">
                <h3>Классификация текста</h3>
                <p>Приложение демонстрирует (на примере предзаданного (для простоты) текста, обогащаемого пользователем ) применение теоремы Байеса для классификации текста. Приложение позволяет увидеть алгоритмическое принятие решения на основе анализа встречающихся ключевых слов.</p>
                
                <div class="formula-section">
                    <h4>Формула Байеса:</h4>
                    <div class="formula">
                        P(H|D) = P(D|H) × P(H) / P(D)
                    </div>
                    <p>где:<br>
                    • P(H|D) - апостериорная вероятность (вероятность гипотезы после наблюдения данных)<br>
                    • P(D|H) - правдоподобие (вероятность данных при условии гипотезы)<br>
                    • P(H) - априорная вероятность (вероятность гипотезы до наблюдения)<br>
                    • P(D) - вероятность данных (нормирующая константа)</p>
                </div>
            </div>

            <div class="text-input-section">
                <label for="textInput">Текст для анализа:</label>
                <div class="name-input">
                    <label>Ваше имя: <input type="text" id="nameInput" placeholder="Введите ваше имя"></label>
                </div>
                <textarea id="textInput">Студент Фамилия Имя, чтобы получить право сдать экзамен, выполняет практическую работу в процессе изучения  квантитативной лингвистики в Брестском государственном университете имени А.С. Пушкина. В рамках курса по компьютерной лингвистике осваиваются алгоритмы классификации текстов и методы обработки естественного языка. Особое внимание уделяется большим языковым моделям. На практических занятиях реализуется работа с корпусами текстов и применяет статистические методы для извлечения информации. Параллельно изучаются основы образовательного промптинга с LLM и библиотеки для работы с текстами. В будущем предполагается углубленное изучение компьютерного моделирования на основе глубокого обучения и трансформеров для решения задач NLP.</textarea>
                <button class="analyze-btn" onclick="analyzeText()">Анализировать текст</button>
            </div>

            <div class="results-section" id="results">
                <h3>Результаты анализа и объяснение</h3>
                <div class="highlighted-text" id="highlightedText"></div>
                
                <div class="probability-cards">
                    <div class="probability-card">
                        <h4>Вероятность H₁ (Машинное обучение)</h4>
                        <div class="probability-value" id="probH1">0.000</div>
                    </div>
                    <div class="probability-card">
                        <h4>Вероятность H₂ (Лингвистика)</h4>
                        <div class="probability-value" id="probH2">0.000</div>
                    </div>
                </div>

                <div class="explanation-section">
                    <h4>Пошаговое объяснение расчета:</h4>
                    
                    <div class="explanation-step">
                        <span class="step-number">1</span>
                        <strong>Определение гипотез и априорных вероятностей</strong>
                        <p>Мы рассматриваем две гипотезы:<br>
                        • H₁: Текст относится к машинному обучению<br>
                        • H₂: Текст относится к лингвистике<br>
                        Изначально предполагаем равные вероятности: P(H₁) = 0.5, P(H₂) = 0.5</p>
                    </div>

                    <div class="explanation-step">
                        <span class="step-number">2</span>
                        <strong>Подсчет ключевых слов</strong>
                        <p id="keywordCounts">Найдено ключевых слов: H₁ - 0, H₂ - 0</p>
                        <p>Каждое ключевое слово увеличивает правдоподобие соответствующей гипотезы.</p>
                    </div>

                    <div class="explanation-step">
                        <span class="step-number">3</span>
                        <strong>Расчет правдоподобия P(D|H)</strong>
                        <p id="likelihoodExplanation">Правдоподобие показывает, насколько вероятно увидеть такие данные при каждой гипотезе.</p>
                    </div>

                    <div class="explanation-step">
                        <span class="step-number">4</span>
                        <strong>Расчет апостериорных вероятностей</strong>
                        <p>Используем формулу Байеса для обновления наших убеждений после наблюдения данных:</p>
                        <div class="formula">
                            P(H|D) = [P(D|H) × P(H)] / [P(D|H₁)×P(H₁) + P(D|H₂)×P(H₂)]
                        </div>
                        <p id="calculationDetails">Детали расчета будут показаны здесь после анализа.</p>
                    </div>

                    <div class="explanation-step">
                        <span class="step-number">5</span>
                        <strong>Интерпретация результатов</strong>
                        <p id="interpretation">Апостериорные вероятности показывают, насколько мы уверены в каждой гипотезе после анализа текста. Более высокая вероятность указывает на более вероятную категорию текста.</p>
                    </div>
                </div>

                <div class="formula-section">
                    <h4>Полный расчет по формуле Байеса:</h4>
                    <div class="formula" id="bayesFormula"></div>
                </div>
            </div>
        </div>
    </div>

    
 <footer class="footer">
<div class="container">
<p>© 2025 | kmp | CC BY-NC-SA 4.0<br>
Разработано для студентов БрГУ имени А.С. Пушкина</p>
</div>
</div>
</footer>
<div style="position: fixed; bottom: 10px; right: 33px; opacity: 0.3; font-size: 14px;">kmp+</div>
    
    <script>
        // Ключевые слова для гипотез
        const keywords = {
            h1: ['машинное обучение', 'машинному обучению', 'алгоритмы', 'нейронные сети', 'нейронных сетей', 
                 'классификация', 'классификации', 'статистические методы', 'глубокое обучение', 'глубокого обучения',
                 'python', 'данных', 'трансформеров', 'модель', 'обучения'],
            h2: ['лингвистика', 'лингвистику', 'язык', 'языка', 'текст', 'текстов', 'текстами', 
                 'корпус', 'корпусами', 'nlp', 'естественного языка', 'синтаксис', 'семантика', 
                 'морфология', 'грамматика']
        };

        // Априорные вероятности
        const priorH1 = 0.5;
        const priorH2 = 0.5;

        function toggleTheme() {
            const body = document.body;
            const themeToggle = document.querySelector('.theme-toggle');
            
            if (body.getAttribute('data-theme') === 'dark') {
                body.removeAttribute('data-theme');
                themeToggle.textContent = '☀️';
            } else {
                body.setAttribute('data-theme', 'dark');
                themeToggle.textContent = '🌙';
            }
        }

        function updateTextWithName() {
            const nameInput = document.getElementById('nameInput').value.trim();
            const textArea = document.getElementById('textInput');
            let text = textArea.value;
            
            if (nameInput) {
                text = text.replace(/Студент\s+\S+\s+\S+/, `Студент ${nameInput}`);
                textArea.value = text;
            }
        }

        document.getElementById('nameInput').addEventListener('input', updateTextWithName);

        function analyzeText() {
            const text = document.getElementById('textInput').value.toLowerCase();
            const originalText = document.getElementById('textInput').value;
            
            // Подсчет ключевых слов
            let countH1 = 0;
            let countH2 = 0;
            let foundKeywords = [];

            keywords.h1.forEach(keyword => {
                const regex = new RegExp(keyword, 'gi');
                const matches = text.match(regex);
                if (matches) {
                    countH1 += matches.length;
                    matches.forEach(() => foundKeywords.push({word: keyword, hypothesis: 'h1'}));
                }
            });

            keywords.h2.forEach(keyword => {
                const regex = new RegExp(keyword, 'gi');
                const matches = text.match(regex);
                if (matches) {
                    countH2 += matches.length;
                    matches.forEach(() => foundKeywords.push({word: keyword, hypothesis: 'h2'}));
                }
            });

            // Расчет правдоподобия
            const totalKeywordsH1 = keywords.h1.length;
            const totalKeywordsH2 = keywords.h2.length;
            
            const likelihoodH1 = countH1 > 0 ? countH1 / totalKeywordsH1 : 0.01;
            const likelihoodH2 = countH2 > 0 ? countH2 / totalKeywordsH2 : 0.01;

            // Вычисление апостериорных вероятностей
            const evidence = (priorH1 * likelihoodH1) + (priorH2 * likelihoodH2);
            
            let posteriorH1, posteriorH2;
            if (evidence === 0) {
                posteriorH1 = 0.5;
                posteriorH2 = 0.5;
            } else {
                posteriorH1 = (priorH1 * likelihoodH1) / evidence;
                posteriorH2 = (priorH2 * likelihoodH2) / evidence;
            }

            // Выделение ключевых слов в тексте
            let highlightedText = originalText;
            keywords.h1.forEach(keyword => {
                const regex = new RegExp(`(${keyword})`, 'gi');
                highlightedText = highlightedText.replace(regex, '<span class="keyword-h1">$1</span>');
            });
            keywords.h2.forEach(keyword => {
                const regex = new RegExp(`(${keyword})`, 'gi');
                highlightedText = highlightedText.replace(regex, '<span class="keyword-h2">$1</span>');
            });

            document.getElementById('highlightedText').innerHTML = highlightedText;

            // Обновление вероятностей
            document.getElementById('probH1').textContent = posteriorH1.toFixed(3);
            document.getElementById('probH2').textContent = posteriorH2.toFixed(3);

            // Обновление объяснений
            document.getElementById('keywordCounts').innerHTML = 
                `<strong>Найдено ключевых слов:</strong><br>
                • Для H₁ (Машинное обучение): ${countH1} слов<br>
                • Для H₂ (Лингвистика): ${countH2} слов`;

            document.getElementById('likelihoodExplanation').innerHTML = 
                `<strong>Правдоподобие P(D|H):</strong><br>
                • P(Данные|H₁) = ${countH1} / ${totalKeywordsH1} = ${likelihoodH1.toFixed(3)}<br>
                • P(Данные|H₂) = ${countH2} / ${totalKeywordsH2} = ${likelihoodH2.toFixed(3)}<br>
                <em>Правдоподобие показывает, насколько типичны наблюдаемые данные для каждой гипотезы.</em>`;

            document.getElementById('calculationDetails').innerHTML = 
                `<strong>Детали расчета:</strong><br>
                • P(D) = P(D|H₁)×P(H₁) + P(D|H₂)×P(H₂) = ${likelihoodH1.toFixed(3)}×${priorH1} + ${likelihoodH2.toFixed(3)}×${priorH2} = ${evidence.toFixed(3)}<br>
                • P(H₁|D) = [${likelihoodH1.toFixed(3)} × ${priorH1}] / ${evidence.toFixed(3)} = ${posteriorH1.toFixed(3)}<br>
                • P(H₂|D) = [${likelihoodH2.toFixed(3)} × ${priorH2}] / ${evidence.toFixed(3)} = ${posteriorH2.toFixed(3)}`;

            // Интерпретация результатов
            let interpretation = "";
            if (posteriorH1 > 0.7) {
                interpretation = "Текст с высокой вероятностью относится к машинному обучению. На это указывает большое количество соответствующих ключевых слов.";
            } else if (posteriorH2 > 0.7) {
                interpretation = "Текст с высокой вероятностью относится к лингвистике. На это указывает большое количество соответствующих ключевых слов.";
            } else if (Math.abs(posteriorH1 - posteriorH2) < 0.2) {
                interpretation = "Текст содержит элементы обеих тем. Вероятности близки, что указывает на междисциплинарный характер текста.";
            } else if (posteriorH1 > posteriorH2) {
                interpretation = "Текст скорее относится к машинному обучению, но содержит элементы лингвистики.";
            } else {
                interpretation = "Текст скорее относится к лингвистике, но содержит элементы машинного обучения.";
            }
            
            document.getElementById('interpretation').textContent = interpretation;

            // Отображение полной формулы
            const formulaHtml = `
                <div style="text-align: left; line-height: 1.8;">
                    <strong>Для H₁ (Машинное обучение):</strong><br>
                    P(H₁|D) = [P(D|H₁) × P(H₁)] / P(D) = [${likelihoodH1.toFixed(3)} × ${priorH1}] / ${evidence.toFixed(3)} = <strong style="color: var(--color-interactive);">${posteriorH1.toFixed(3)}</strong>
                    <br><br>
                    <strong>Для H₂ (Лингвистика):</strong><br>
                    P(H₂|D) = [P(D|H₂) × P(H₂)] / P(D) = [${likelihoodH2.toFixed(3)} × ${priorH2}] / ${evidence.toFixed(3)} = <strong style="color: var(--color-interactive);">${posteriorH2.toFixed(3)}</strong>
                </div>
            `;
            document.getElementById('bayesFormula').innerHTML = formulaHtml;

            // Показать результаты
            document.getElementById('results').style.display = 'block';
            document.getElementById('results').scrollIntoView({ behavior: 'smooth' });
        }

        // Инициализация при загрузке страницы
        document.addEventListener('DOMContentLoaded', function() {
            if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                document.body.setAttribute('data-theme', 'dark');
                document.querySelector('.theme-toggle').textContent = '🌙';
            }
        });
    </script>
</body>
</html>